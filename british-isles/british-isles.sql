CREATE SCHEMA IF NOT EXISTS demo;
USE demo;

DROP TABLE IF EXISTS areas;
CREATE TABLE areas (
  id INT AUTO_INCREMENT PRIMARY KEY,
  g GEOMETRY NOT NULL SRID 4326,
  name VARCHAR(200)
);

CREATE SPATIAL INDEX g_idx ON areas(g);

SET @england = ST_GeomFromText('POLYGON((-3.09814453125 53.282253203188716,-2.691650390625 52.899583684093244,-3.087158203125 52.93270653935951,-3.021240234375 51.92119087720499,-2.581787109375 51.77867430588525,-2.6806640625 51.608422905163586,-3.01025390625 51.21785194366128,-3.6968994140625 51.22473283639159,-4.185791015625 51.21097002234222,-5.77880859375 50.0895297555298,-5.1416015625 49.98368235554624,-4.6142578125 50.35663288150293,-3.6474609375 50.18811020464775,-3.33984375 50.629211106226904,-1.20849609375 50.55248928236337,-0.889892578125 50.733630347072484,1.03271484375 50.89328880532674,1.527099609375 51.362134771677404,0.615234375 51.458071571114836,1.77978515625 52.25870177181817,1.768798828125 52.839898687965906,0.5438232421875 53.00218209808631,0.40374755859375 52.838239599071066,0.124969482421875 52.974901445349104,0.4360198974609375 53.16179940352297,-0.49610137939453125 54.45367413824383,-1.1908511817455292 54.66135100444396,-1.610942780971527 55.538789955081725,-2.066604495048523 55.81875587871207,-2.3407208919525146 55.63558478086807,-2.229773998260498 55.478914264689365,-3.326239585876465 54.94974864949653,-3.6954402923583984 54.53208944046126,-3.1759071350097656 54.02723427824996,-3.09814453125 53.282253203188716))', 4326, 'axis-order=long-lat');
SET @guernsey = ST_GeomFromText('POLYGON((-2.669677734375 49.42133115332683,-2.585906982421875 49.415077556004526,-2.5653076171875 49.42222445932338,-2.530975341796875 49.41954449254702,-2.536468505859375 49.43740817322266,-2.525482177734375 49.44544470745559,-2.528228759765625 49.465976533589334,-2.51312255859375 49.47668537640862,-2.506256103515625 49.505230845832685,-2.548828125 49.51147294840677,-2.6202392578125 49.46508402434436,-2.668304443359375 49.45972862744654,-2.649078369140625 49.44455182424884,-2.6641845703125 49.4338359574531,-2.67791748046875 49.43830118651287,-2.669677734375 49.42133115332683))', 4326, 'axis-order=long-lat');
SET @isle_of_man = ST_GeomFromText('POLYGON((-4.82574462890625 54.052283979570326,-4.7296142578125 54.1392608718274,-4.757080078125 54.17785874850631,-4.60052490234375 54.29183347545469,-4.54010009765625 54.36870857538125,-4.3560791015625 54.42467277615277,-4.38079833984375 54.32548401407063,-4.30938720703125 54.298245223084855,-4.4000244140625 54.20196414448628,-4.38079833984375 54.187502593686794,-4.45770263671875 54.160172523446384,-4.46319580078125 54.1392608718274,-4.59228515625 54.07968526412842,-4.6142578125 54.05550859857815,-4.647216796875 54.073239529630115,-4.67193603515625 54.0538963203597,-4.7076416015625 54.07968526412842,-4.82574462890625 54.052283979570326))', 4326, 'axis-order=long-lat');
SET @jersey = ST_GeomFromText('POLYGON((-2.253570556640625 49.262063539063085,-2.220611572265625 49.261167320887125,-2.18902587890625 49.24772209507262,-2.154693603515625 49.26295974096302,-2.097015380859375 49.25399698953333,-2.075042724609375 49.23696327751939,-2.02972412109375 49.23158298973044,-2.0159912109375 49.197494224137564,-2.0379638671875 49.18313402631511,-2.022857666015625 49.15799364980627,-2.07916259765625 49.15978981437039,-2.14508056640625 49.193904565449635,-2.171173095703125 49.18223637555158,-2.164306640625 49.166075877382745,-2.186279296875 49.166075877382745,-2.193145751953125 49.18223637555158,-2.22198486328125 49.173258972351796,-2.24395751953125 49.178645609669005,-2.22747802734375 49.20736444232147,-2.253570556640625 49.262063539063085))', 4326, 'axis-order=long-lat');
SET @northern_ireland = ST_GeomFromText('POLYGON((-7.261962890625 55.06136316912078,-7.40478515625 54.99839513578147,-7.547607421875 54.75187332411563,-7.745361328125 54.69476938595546,-7.8497314453125 54.7233314113076,-7.9266357421875 54.65347760545537,-7.701416015625 54.61850560330456,-7.855224609375 54.52616245424377,-8.0255126953125 54.53253766492317,-8.1903076171875 54.45916261802296,-7.877197265625 54.24145653920111,-7.547607421875 54.116074802328065,-7.294921875 54.09997272065261,-7.2344970703125 54.20934361065397,-7.1466064453125 54.24145653920111,-7.174072265625 54.315221513003614,-6.998291015625 54.42402362955701,-6.866455078125 54.29278528234133,-6.7730712890625 54.1836352800809,-6.6632080078125 54.193277778118045,-6.6357421875 54.109634720039004,-6.624755859375 54.03096496898183,-6.52587890625 54.05873296730692,-6.3665771484375 54.065180953964145,-6.36383056640625 54.10867868504815,-6.31988525390625 54.09257373068024,-6.28692626953125 54.115118915843645,-6.0369873046875 54.019368482305765,-5.855712890625 54.14826020892935,-5.855712890625 54.1997048607147,-5.82275390625 54.240503546387046,-5.6744384765625 54.238898456104096,-5.6524658203125 54.22123834186044,-5.52886962890625 54.29664237977144,-5.438232421875 54.41828073110219,-5.42449951171875 54.490133778883276,-5.55084228515625 54.665244084318346,-5.89141845703125 54.64299909630881,-5.8721923828125 54.68112590686655,-5.712890625 54.73349186225185,-5.67718505859375 54.83327557488383,-5.8062744140625 54.87438441348007,-5.95733642578125 54.99588420329653,-5.95733642578125 55.055709929695816,-6.0479736328125 55.06200218074483,-6.009521484375 55.18386644421845,-6.163330078125 55.24654295082058,-6.2677001953125 55.21521703557999,-6.5313720703125 55.268456414586396,-6.7291259765625 55.17445645346419,-6.9873046875 55.17445645346419,-7.0367431640625 55.051924270971206,-7.261962890625 55.06136316912078))', 4326, 'axis-order=long-lat');
SET @republic_of_ireland = ST_GeomFromText('POLYGON((-7.261962890625 55.06136316912078,-7.40478515625 54.99839513578147,-7.547607421875 54.75187332411563,-7.745361328125 54.69476938595546,-7.8497314453125 54.7233314113076,-7.9266357421875 54.65347760545537,-7.701416015625 54.61850560330456,-7.855224609375 54.52616245424377,-8.0255126953125 54.53253766492317,-8.1903076171875 54.45916261802296,-7.877197265625 54.24145653920111,-7.547607421875 54.116074802328065,-7.294921875 54.09997272065261,-7.2344970703125 54.20934361065397,-7.1466064453125 54.24145653920111,-7.174072265625 54.315221513003614,-6.998291015625 54.42402362955701,-6.866455078125 54.29278528234133,-6.7730712890625 54.1836352800809,-6.6632080078125 54.193277778118045,-6.6357421875 54.109634720039004,-6.624755859375 54.03096496898183,-6.52587890625 54.05873296730692,-6.3665771484375 54.065180953964145,-6.36383056640625 54.10867868504815,-6.31988525390625 54.09257373068024,-6.28692626953125 54.115118915843645,-6.0369873046875 54.019368482305765,-6.347028538584709 53.9923799591542,-6.386692710220814 53.886709859358014,-6.217616647481918 53.839155357557324,-5.936820209026337 53.087935268097695,-6.363996863365173 52.10891692058736,-7.218350172042847 52.153161515533306,-9.058892726898193 51.39947339749655,-10.147204399108887 51.52433860667921,-10.522069931030273 52.20602872794315,-9.997386932373047 52.29325746403673,-9.475364685058594 53.157785303175885,-10.189132690429688 53.498155882694135,-9.617156982421875 53.88683869846981,-10.09918212890625 53.896550285240444,-10.074462890625 54.30240230713508,-9.2724609375 54.334442836193844,-9.140625 54.18268095224894,-9.052734375 54.283817386934736,-8.646240234375 54.275799738297486,-8.66546630859375 54.36070745650924,-8.140869140625 54.61597095174525,-8.65447998046875 54.598472580444465,-8.81927490234375 54.7096975370562,-8.41827392578125 54.86490147676399,-8.5693359375 54.965937844757796,-8.5089111328125 55.0210848670474,-8.28094482421875 55.151559335722496,-7.6629638671875 55.29255704326791,-7.61077880859375 55.209585545115,-7.55584716796875 55.19391111727534,-7.5311279296875 55.29099314622242,-7.3883056640625 55.30286744657281,-7.393798828125 55.39344451753156,-7.1685791015625 55.359112083199356,-7.152099609375 55.3059942431327,-6.9049072265625 55.26219665804025,-6.9598388671875 55.20581444962167,-7.130126953125 55.17445645346419,-7.261962890625 55.06136316912078))', 4326, 'axis-order=long-lat');
SET @scotland = ST_GeomFromText('POLYGON((-4.39453125 54.66489660002442,-4.8779296875 54.85507045369634,-4.866943359375 54.64583004992668,-5.25146484375 54.9624393626851,-5.262451171875 55.15121602408922,-4.8779296875 55.33285499190967,-4.59228515625 55.526104297837996,-4.7076416015625 55.60376001565307,-4.976806640625 55.66887223942909,-5.6689453125 55.226477626370155,-6.52587890625 55.66887223942914,-6.5478515625 55.934394827143144,-6.13037109375 56.15530252220939,-6.96533203125 56.417509732841296,-6.328125 56.83451279973639,-7.613525390625 56.87055646232827,-7.36083984375 58.127764161424786,-6.163330078125 58.600285301920536,-6.13037109375 57.73110204137044,-5.03173828125 58.66890511164919,-3.065185546875 58.66319194261258,-3.8287353515625 57.85699125874601,-3.96881103515625 57.57091299297696,-3.0205535888671875 57.74319767123089,-1.918487548828125 57.69222204101619,-1.6953277587890625 57.51158171318392,-2.7812576293945312 56.43478711853242,-2.60128878057003 56.269204723402304,-3.212335556745529 55.99245650773616,-2.698589265346527 56.045253973565806,-2.066604495048523 55.81875587871207,-2.3407208919525146 55.63558478086807,-2.229773998260498 55.478914264689365,-3.326239585876465 54.94974864949653,-4.030523300170898 54.76727561610443,-4.384403228759766 54.86406173424242,-4.39453125 54.66489660002442))', 4326, 'axis-order=long-lat');
SET @wales = ST_GeomFromText('POLYGON((-3.09814453125 53.282253203188716,-2.691650390625 52.899583684093244,-3.087158203125 52.93270653935951,-3.021240234375 51.92119087720499,-2.581787109375 51.77867430588525,-2.6806640625 51.608422905163586,-3.284912109375 51.37585235437317,-4.273681640625 51.58794968800179,-5.185546875 51.66978719120944,-5.09765625 51.975364240141815,-4.229736328125 52.28559241729168,-4.19677734375 52.866435491095274,-4.74609375 52.76683880306226,-4.361572265625 53.04513483308966,-4.68017578125 53.32164563715305,-4.3505859375 53.42651455367774,-4.06494140625 53.242824424048,-3.31787109375 53.34788707538668,-3.09814453125 53.282253203188716))', 4326, 'axis-order=long-lat');
SET @gb = ST_SRID(ST_Union(ST_Union(ST_SRID(@england, 0), ST_SRID(@wales, 0)), ST_SRID(@scotland, 0)), 4326);
SET @uk = ST_SRID(ST_Union(ST_SRID(@gb, 0), ST_SRID(@northern_ireland, 0)), 4326);
SET @channel_islands = ST_SRID(ST_Union(ST_SRID(@guernsey, 0), ST_SRID(@jersey, 0)), 4326);
SET @british_islands = ST_SRID(ST_Union(ST_Union(ST_SRID(@uk, 0), ST_SRID(@channel_islands, 0)), ST_SRID(@isle_of_man, 0)), 4326);
SET @british_isles = ST_SRID(ST_Union(ST_SRID(@british_islands, 0), ST_SRID(@republic_of_ireland, 0)), 4326);

INSERT INTO areas (name, g) VALUES ('England', @england);
INSERT INTO areas (name, g) VALUES ('Bailiwick of Guernsey', @guernsey);
INSERT INTO areas (name, g) VALUES ('Isle of Man', @isle_of_man);
INSERT INTO areas (name, g) VALUES ('Bailiwick of Jersey', @jersey);
INSERT INTO areas (name, g) VALUES ('Northern Ireland', @northern_ireland);
INSERT INTO areas (name, g) VALUES ('Republic of Ireland', @republic_of_ireland);
INSERT INTO areas (name, g) VALUES ('Scotland', @scotland);
INSERT INTO areas (name, g) VALUES ('Wales', @wales);
INSERT INTO areas (name, g) VALUES ('Ireland (the island)', ST_SRID(ST_Union(ST_SRID(@republic_of_ireland, 0), ST_SRID(@northern_ireland, 0)), 4326));
INSERT INTO areas (name, g) VALUES ('Great Britain', @gb);
INSERT INTO areas (name, g) VALUES ('United Kingdom', ST_SRID(ST_Union(ST_SRID(@northern_ireland, 0), ST_SRID(@gb, 0)), 4326));
INSERT INTO areas (name, g) VALUES ('The Channel Islands', @channel_islands);
INSERT INTO areas (name, g) VALUES ('The British Islands', @british_islands);
INSERT INTO areas (name, g) VALUES ('The British Isles', @british_isles);

SET @dublin = ST_GeomFromText('POINT(-6.2683 53.3409)', 4326, 'axis-order=long-lat');
SET @trondheim = ST_GeomFromText('POINT(10.394965410 63.430486506)', 4326, 'axis-order=long-lat');
